<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ISKCON Burla | 5000+ Bhagavad Gita Distribution</title>
    <style>
        :root {
            --iskcon-orange: #FF6600;
            --iskcon-blue: #3366CC;
            --iskcon-gold: #FFD700;
            --iskcon-maroon: #800000;
            --dark-bg: #1a1a2e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        body,
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Arial', 'Helvetica', sans-serif;
            background: var(--dark-bg);
            position: fixed;
        }

        /* SCREEN 1: INTRO - MOBILE OPTIMIZED */
        #screen-1 {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            background: radial-gradient(circle at top, #1a0a00, #000);
            position: relative;
            overflow: hidden;
            padding: 20px;
        }

        .intro-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle, rgba(255, 200, 0, 0.15), transparent 60%);
            filter: brightness(0.45);
            z-index: 0;
        }

        .header-logo {
            position: relative;
            z-index: 2;
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }

        .logo-imge {
            font-family: 'Georgia', serif;
            font-size: 28px;
            font-weight: bold;
            color: gold;
            text-align: center;
            padding: 12px 20px;
            border-radius: 8px;
            background: radial-gradient(circle, #2c1a00, #000);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .iskcon-name {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .iskcon-burla {
            color: var(--iskcon-gold);
            font-size: 16px;
            margin-top: 5px;
            letter-spacing: 1px;
        }

        .intro-title {
            color: white;
            font-size: 22px;
            text-align: center;
            margin: 15px 0;
            z-index: 1;
            padding: 0 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            background: linear-gradient(90deg, #ffdd00, #ff5722);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 140, 0, 0.7);
        }

        h2 {
            color: #f5f5f5;
            font-size: 16px;
            text-align: center;
            margin: 15px 0;
            padding: 0 15px;
            line-height: 1.4;
            z-index: 2;
        }

        .btn-click-me {
            padding: 18px 40px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 30px;
            background: linear-gradient(45deg, var(--iskcon-orange), var(--iskcon-maroon));
            color: white;
            cursor: pointer;
            animation: pulse 1.5s infinite, float 3s infinite ease-in-out;
            box-shadow: 0 8px 25px rgba(255, 102, 0, 0.4);
            z-index: 1;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            margin-top: 20px;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(255, 102, 0, 0.4);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 12px 35px rgba(255, 102, 0, 0.6);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(255, 102, 0, 0.4);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        .floating-element {
            position: absolute;
            z-index: 1;
            opacity: 0.35;
            font-size: 24px;
            user-select: none;
            pointer-events: none;
        }

        /* SCREEN 2: MAIN CELEBRATION - MOBILE OPTIMIZED */
        #screen-2 {
            display: none;
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(180deg, #0c2461 0%, #1e3799 30%, #4a69bd 100%);
            overflow: hidden;
        }

        .sound-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            cursor: pointer;
            z-index: 200;
            border: 2px solid var(--iskcon-gold);
        }

        /* UPDATED HEADER - BIGGER AND ANIMATED */
        .main-header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            border-bottom: 2px solid var(--iskcon-gold);
            backdrop-filter: blur(5px);
            padding: 0 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.7);
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            width: 100%;
            justify-content: center;
        }

        .header-text {
            color: white;
            text-align: center;
            animation: headerGlow 2s infinite alternate;
        }

        .header-text h1 {
            font-size: 22px;
            margin-bottom: 0;
            color: var(--iskcon-gold);
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            letter-spacing: 1px;
        }

        .header-text h2 {
            font-size: 16px;
            color: #fff;
            font-weight: normal;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        @keyframes headerGlow {
            from {
                text-shadow: 0 0 5px rgba(255, 215, 0, 0.5),
                             0 0 10px rgba(255, 215, 0, 0.3);
            }
            to {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.8),
                             0 0 20px rgba(255, 215, 0, 0.5),
                             0 0 30px rgba(255, 215, 0, 0.3);
            }
        }

        .main-container {
            position: absolute;
            top: 80px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 3px solid var(--iskcon-gold);
            background: rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .celebration-area {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .big-arrow-container {
            position: absolute;
            top: 10px;
            left: 0;
            width: 100%;
            height: 50px;
            z-index: 20;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 10px;
        }

        .big-arrow {
            width: 90%;
            height: 6px;
            background: linear-gradient(90deg, #00ff00, #00cc00);
            position: relative;
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
            animation: arrowPulse 1.5s infinite alternate;
        }

        @keyframes arrowPulse {
            from {
                box-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
            }
            to {
                box-shadow: 0 0 20px rgba(0, 255, 0, 0.9),
                            0 0 30px rgba(0, 255, 0, 0.5);
            }
        }

        .big-arrow::after {
            content: '';
            position: absolute;
            right: -12px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid #00cc00;
            border-top: 12px solid transparent;
            border-bottom: 12px solid transparent;
        }

        .arrow-label {
            position: absolute;
            top: -20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: #00ff00;
            font-weight: bold;
            font-size: 12px;
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.7);
            animation: arrowLabelPulse 2s infinite alternate;
        }

        @keyframes arrowLabelPulse {
            from {
                opacity: 0.8;
                text-shadow: 0 0 5px rgba(0, 255, 0, 0.7);
            }
            to {
                opacity: 1;
                text-shadow: 0 0 10px rgba(0, 255, 0, 1),
                             0 0 20px rgba(0, 255, 0, 0.7);
            }
        }

        #image-canvas {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 5;
        }

        .falling-img {
            position: absolute;
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 6px;
            will-change: transform;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.2s, opacity 0.5s;
        }

        .counter-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 6px;
            z-index: 30;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 12px;
            border: 2px solid var(--iskcon-gold);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
            min-width: 220px;
            max-width: 90%;
        }

        .counter-title {
            position: absolute;
            top: -35px;
            left: 0;
            width: 100%;
            text-align: center;
            color: var(--iskcon-gold);
            font-size: 14px;
            font-weight: bold;
        }

        .digit-box {
            width: 40px;
            height: 55px;
            background: #000;
            color: white;
            overflow: hidden;
            position: relative;
            border: 2px solid #444;
            border-radius: 4px;
            flex: 1;
        }

        .active-digit {
            border-color: var(--iskcon-gold);
            box-shadow: 0 0 10px var(--iskcon-gold);
            transform: translateY(-3px);
        }

        .digit-strip {
            position: absolute;
            width: 100%;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .digit {
            height: 55px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .small-arrow {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            color: #00ff00;
            font-size: 16px;
            font-weight: bold;
            animation: bounce 0.8s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(-3px);
            }
        }

        .floating-om {
            font-size: 24px;
            color: var(--iskcon-gold);
            animation: floatAround 20s infinite linear;
        }

        @keyframes floatAround {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }

            25% {
                transform: translate(50px, 30px) rotate(90deg);
            }

            50% {
                transform: translate(30px, 50px) rotate(180deg);
            }

            75% {
                transform: translate(-30px, 30px) rotate(270deg);
            }

            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* UPDATED FINAL MESSAGE - MOVED HIGHER */
        #final-message {
            position: absolute;
            bottom: 120px; /* Changed from 10px to 120px to move higher */
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            text-align: center;
            opacity: 0;
            transition: opacity 1s ease, transform 0.5s ease;
            z-index: 40;
            animation: messageFloat 3s infinite ease-in-out;
        }

        @keyframes messageFloat {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .congrats-box {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 25px 20px;
            border: 3px solid var(--iskcon-gold);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9),
                        0 0 40px rgba(255, 215, 0, 0.5),
                        0 0 60px rgba(255, 215, 0, 0.3);
            margin: 0 auto;
            animation: boxGlow 2s infinite alternate;
        }

        @keyframes boxGlow {
            from {
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9),
                            0 0 30px rgba(255, 215, 0, 0.4),
                            0 0 50px rgba(255, 215, 0, 0.2);
            }
            to {
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9),
                            0 0 50px rgba(255, 215, 0, 0.6),
                            0 0 70px rgba(255, 215, 0, 0.4);
            }
        }

        .congrats-text {
            color: var(--iskcon-gold);
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 12px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);
            animation: textShine 3s infinite alternate;
        }

        @keyframes textShine {
            from {
                color: var(--iskcon-gold);
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);
            }
            to {
                color: #ffed4e;
                text-shadow: 0 2px 15px rgba(255, 215, 0, 0.8),
                             0 0 20px rgba(255, 215, 0, 0.6);
            }
        }

        .count-text {
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.7);
        }

        .sub-text {
            color: #eee;
            font-size: 15px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .rocket {
            position: absolute;
            bottom: -100px;
            width: 30px;
            height: 75px;
            z-index: 25;
            opacity: 0;
        }

        .rocket-body {
            width: 100%;
            height: 80%;
            background: linear-gradient(180deg, #FF6600, #FF3300);
            border-radius: 8px 8px 0 0;
            position: relative;
        }

        .rocket-fin {
            position: absolute;
            bottom: 0;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 20px solid #FF3300;
        }

        .rocket-fire {
            position: absolute;
            bottom: -20px;
            left: 5px;
            width: 20px;
            height: 25px;
            background: linear-gradient(180deg, #FFD700, #FF6600, #FF0000);
            border-radius: 50%;
            filter: blur(3px);
            animation: firePulse 0.3s infinite;
        }

        @keyframes firePulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.8;
            }

            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            z-index: 10;
            opacity: 0;
        }

        .glow {
            animation: glow 1.5s infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 8px var(--iskcon-gold), 0 0 15px var(--iskcon-gold);
            }

            to {
                box-shadow: 0 0 15px var(--iskcon-gold), 0 0 25px var(--iskcon-gold), 0 0 35px var(--iskcon-gold);
            }
        }

        .decorative-border {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .border-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, transparent, var(--iskcon-gold), transparent);
        }

        .border-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, transparent, var(--iskcon-gold), transparent);
        }

        .hidden {
            display: none !important;
        }

        .visible {
            opacity: 1 !important;
        }

        /* Adjustments for very small screens */
        @media (max-width: 360px) {
            .logo-imge {
                font-size: 24px;
                padding: 10px 15px;
            }

            .intro-title {
                font-size: 20px;
            }

            h2 {
                font-size: 14px;
            }

            .btn-click-me {
                padding: 15px 30px;
                font-size: 16px;
            }

            .header-text h1 {
                font-size: 20px;
            }

            .header-text h2 {
                font-size: 14px;
            }

            #final-message {
                bottom: 100px;
            }

            .congrats-text {
                font-size: 20px;
            }

            .count-text {
                font-size: 22px;
            }

            .counter-overlay {
                min-width: 200px;
                padding: 12px;
                gap: 4px;
            }

            .digit-box {
                width: 35px;
                height: 50px;
            }

            .digit {
                height: 50px;
                font-size: 24px;
            }

            .floating-om {
                font-size: 20px;
            }
        }

        /* Adjustments for tablet/landscape */
        @media (min-width: 768px) and (max-width: 1024px) {
            .main-container {
                left: 20px;
                right: 20px;
                top: 80px;
                bottom: 20px;
            }

            .header-text h1 {
                font-size: 28px;
            }

            .header-text h2 {
                font-size: 20px;
            }

            #final-message {
                bottom: 150px;
                width: 80%;
            }

            .congrats-text {
                font-size: 26px;
            }

            .count-text {
                font-size: 28px;
            }

            .counter-overlay {
                min-width: 300px;
            }

            .digit-box {
                width: 50px;
                height: 65px;
            }

            .digit {
                height: 65px;
                font-size: 32px;
            }
        }
    </style>
</head>

<body>

    <!-- SCREEN 1: INTRO -->
    <div id="screen-1">
        <div class="intro-bg"></div>

        <div class="header-logo">
            <div class="logo-imge">Hare Krishna</div>
            <div class="iskcon-name">ISKCON</div>
            <div class="iskcon-burla">BURLA</div>
        </div>

        <h1 class="intro-title">Gita Marathon 2025</h1>
        <h2>To see the final details of book marathon 2025 click below</h2>
        <button class="btn-click-me" onclick="startExperience()">CLICK</button>

        <!-- Decorative elements -->
        <div class="floating-element" style="top:20%; left:5%;">‡ºí ùô∑ùô∞ùöÅùô¥ ùô∫ùöÅùô∏ùöÇùô∑ùôΩùô∞ ‡ºí</div>
        <div class="floating-element" style="top:70%; left:85%;">üìø</div>
    </div>

    <!-- SCREEN 2: MAIN CELEBRATION -->
    <div id="screen-2">
        <div class="sound-toggle" onclick="toggleSound()">üìø</div>

        <div class="main-header">
            <div class="header-content">
                <div class="header-text">
                    <h1>ISKCON BURLA</h1>
                    <h2>Bhagavad Gita Marathon Celebration</h2>
                </div>
            </div>
        </div>

        <div class="main-container">
            <div class="decorative-border">
                <div class="border-top"></div>
                <div class="border-bottom"></div>
            </div>

            <div class="big-arrow-container">
                <div class="big-arrow">
                    <div class="arrow-label">5062+ BOOKS DISTRIBUTED</div>
                </div>
            </div>

            <div class="celebration-area">
                <div id="image-canvas"></div>

                <!-- Floating decorative elements -->
                <div class="floating-element floating-om" style="top:15%; left:10%;">üìø</div>
                <div class="floating-element floating-om" style="top:75%; left:80%;">‡ºí ùô∑ùô∞ùöÅùô¥ ùô∫ùöÅùô∏ùöÇùô∑ùôΩùô∞ ‡ºí</div>
                <div class="floating-element floating-om" style="top:45%; left:85%;">üôè</div>
                <div class="floating-element floating-om" style="top:85%; left:10%;">üìñ</div>

                <!-- Counter Overlay -->
                <div class="counter-overlay">
                    <div class="counter-title">BOOKS DISTRIBUTED</div>
                    <div class="digit-box" id="digit-box-1">
                        <div class="small-arrow">‚Üë</div>
                        <div class="digit-strip" id="d1"></div>
                    </div>
                    <div class="digit-box" id="digit-box-2">
                        <div class="digit-strip" id="d2"></div>
                    </div>
                    <div class="digit-box" id="digit-box-3">
                        <div class="digit-strip" id="d3"></div>
                    </div>
                    <div class="digit-box" id="digit-box-4">
                        <div class="digit-strip" id="d4"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- UPDATED: Final Message moved higher with enhanced styling -->
        <div id="final-message">
            <div class="congrats-box">
                <p class="congrats-text">üôè Congratulations to All Devotees üôè</p>
                <p class="count-text">5000+ Bhagavad Gita Distributed</p>
                <p class="sub-text">A milestone achieved through divine grace and dedicated service</p>
                <p class="sub-text" style="margin-top:10px; color:var(--iskcon-gold); font-size:14px; font-weight:bold;">ISKCON Burla ‚Ä¢ Serving Since 2006</p>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="sfx-tap" preload="auto">
        <source src="freesound_community-text-scroll-g4-180-openmpt-agogo-39617.wav" type="audio/wav">
    </audio>
    <audio id="sfx-roll" preload="auto">
        <source src="freesound_community-text-scroll-g4-180-openmpt-agogo-39617.wav" type="audio/wav">
    </audio>
    <audio id="sfx-win" preload="auto">
        <source src="freesound_community-text-scroll-g4-180-openmpt-agogo-39617.wav" type="audio/wav">
    </audio>
    <audio id="sfx-rocket" preload="auto">
        <source src="freesound_community-text-scroll-g4-180-openmpt-agogo-39617.wav" type="audio/wav">
    </audio>

    <script>
        // Configuration
        const config = {
            targetCount: 5062,
            imageCount: 30,
            duration: 8000,
            soundEnabled: true,
            
            // For local images
            imageBasePath: "",
            
            // Using your actual image filenames
            imageFilenames: [
                "image1.jpg", "image2.jpg", "image3.jpg", "image4.jpg", "image5.jpg",
                "image6.jpg", "image7.jpg", "image8.jpg", "image9.jpg", "image10.jpg",
                "image11.jpg", "image12.jpg", "image13.jpg", "image14.jpg", "image15.jpg",
                "image16.jpg", "image17.jpg", "image18.jpg", "image19.jpg", "image20.jpg",
                "image21.jpg", "image22.jpg", "image23.jpg", "image24.jpg", "image25.jpg",
                "image26.jpg"
            ]
        };

        // Global variables
        let currentCount = 0;
        let animationActive = false;
        let rockets = [];
        let confettiPieces = [];
        const canvas = document.getElementById('image-canvas');
        const strips = [
            document.getElementById('d1'),
            document.getElementById('d2'),
            document.getElementById('d3'),
            document.getElementById('d4')
        ];
        const digitBoxes = [
            document.getElementById('digit-box-1'),
            document.getElementById('digit-box-2'),
            document.getElementById('digit-box-3'),
            document.getElementById('digit-box-4')
        ];

        // Audio elements
        const tapSound = document.getElementById('sfx-tap');
        const rollSound = document.getElementById('sfx-roll');
        const winSound = document.getElementById('sfx-win');
        const rocketSound = document.getElementById('sfx-rocket');

        // Initialize the page
        function init() {
            // Initialize digit strips
            strips.forEach((strip, index) => {
                // Clear existing content
                strip.innerHTML = '';
                
                // Create 0-9 digits plus an extra 0 for seamless loop
                for (let i = 0; i <= 10; i++) {
                    const digitDiv = document.createElement('div');
                    digitDiv.className = 'digit';
                    digitDiv.textContent = i % 10;
                    strip.appendChild(digitDiv);
                }
                // Start at position 0
                strip.style.transform = 'translateY(0px)';
                strip.currentPosition = 0;
            });

            console.log("ISKCON Burla Celebration ready! Click the button to start.");
        }

        // Start the celebration experience
        function startExperience() {
            // Setup audio
            [tapSound, rollSound, winSound, rocketSound].forEach(sound => {
                sound.muted = false;
                sound.volume = config.soundEnabled ? 1 : 0;
                sound.play().then(() => {
                    sound.pause();
                    sound.currentTime = 0;
                }).catch(() => {});
            });

            // Play tap sound
            tapSound.currentTime = 0;
            tapSound.play();

            // Transition screens
            const screen1 = document.getElementById('screen-1');
            screen1.style.opacity = '0';

            setTimeout(() => {
                screen1.classList.add('hidden');
                const screen2 = document.getElementById('screen-2');
                screen2.style.display = 'block';

                setTimeout(() => {
                    screen2.style.opacity = '1';
                    animationActive = true;
                    initImageAnimation();
                    createRockets();
                    startCounting();

                }, 50);
            }, 500);
        }

        // Toggle sound on/off
        function toggleSound() {
            config.soundEnabled = !config.soundEnabled;
            const toggleBtn = document.querySelector('.sound-toggle');
            toggleBtn.textContent = config.soundEnabled ? 'üìø' : 'üîá';

            const volume = config.soundEnabled ? 1 : 0;
            tapSound.volume = volume;
            rollSound.volume = volume;
            winSound.volume = volume;
            rocketSound.volume = volume;
        }

        // IMAGE FLOW ANIMATION - MOBILE OPTIMIZED
        function initImageAnimation() {
            const images = [];
            const containerWidth = canvas.offsetWidth;
            const containerHeight = canvas.offsetHeight;

            for (let i = 0; i < config.imageCount; i++) {
                const img = document.createElement('img');
                img.className = 'falling-img';

                // Use local images if available, otherwise placeholder
                if (config.imageFilenames && config.imageFilenames.length > 0) {
                    const imageIndex = i % config.imageFilenames.length;
                    img.src = config.imageBasePath + config.imageFilenames[imageIndex];
                } else {
                    // Placeholder
                    img.src = `https://picsum.photos/seed/ISKCON${i}/50/50`;
                }

                img.alt = `Celebration ${i + 1}`;
                img.onerror = function() {
                    // Fallback if image fails to load
                    this.style.background = `linear-gradient(45deg, hsl(${i * 137 % 360}, 70%, 60%), hsl(${(i * 137 + 60) % 360}, 70%, 60%))`;
                    this.style.display = 'flex';
                    this.style.alignItems = 'center';
                    this.style.justifyContent = 'center';
                    this.innerHTML = `<div style="color: white; font-size: 10px; text-align: center;">Gita<br>${i+1}</div>`;
                };
                
                canvas.appendChild(img);

                images.push({
                    el: img,
                    x: Math.random() * (containerWidth - 50),
                    y: -100 + Math.random() * containerHeight,
                    speed: 2 + Math.random() * 3,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 2,
                    scale: 0.7 + Math.random() * 0.3,
                    scaleSpeed: 0.0005 + Math.random() * 0.001,
                    scaleDirection: Math.random() > 0.5 ? 1 : -1,
                });
            }

            // Animation loop
            function updateImages() {
                if (!animationActive) return;

                images.forEach(obj => {
                    obj.y += obj.speed;
                    obj.rotation += obj.rotationSpeed;

                    obj.scale += obj.scaleSpeed * obj.scaleDirection;
                    if (obj.scale > 1.0 || obj.scale < 0.7) {
                        obj.scaleDirection *= -1;
                    }

                    // Reset if below container
                    if (obj.y > containerHeight) {
                        obj.y = -50;
                        obj.x = Math.random() * (containerWidth - 50);
                    }

                    obj.el.style.transform = `
                        translate3d(${obj.x}px, ${obj.y}px, 0)
                        rotate(${obj.rotation}deg)
                        scale(${obj.scale})
                    `;
                });

                requestAnimationFrame(updateImages);
            }

            requestAnimationFrame(updateImages);
        }

        // Create rocket elements
        function createRockets() {
            const container = document.querySelector('.celebration-area');

            for (let i = 0; i < 5; i++) {
                const rocket = document.createElement('div');
                rocket.className = 'rocket';
                rocket.id = `rocket-${i}`;

                const rocketBody = document.createElement('div');
                rocketBody.className = 'rocket-body';

                const rocketFin = document.createElement('div');
                rocketFin.className = 'rocket-fin';

                const rocketFire = document.createElement('div');
                rocketFire.className = 'rocket-fire';

                rocket.appendChild(rocketBody);
                rocket.appendChild(rocketFin);
                rocket.appendChild(rocketFire);

                rocket.style.left = `${10 + (i * 20)}%`;

                container.appendChild(rocket);
                rockets.push(rocket);
            }
        }

        // Launch rockets
        function launchRockets() {
            if (!config.soundEnabled) return;

            rocketSound.currentTime = 0;
            rocketSound.volume = 0.3;
            rocketSound.play();

            rockets.forEach((rocket, index) => {
                setTimeout(() => {
                    rocket.style.opacity = '1';
                    rocket.style.transition = 'transform 3s cubic-bezier(0.1, 0.8, 0.2, 1)';
                    rocket.style.transform = `translateY(-${window.innerHeight + 200}px) rotate(${Math.random() * 10 - 5}deg)`;

                    setTimeout(() => {
                        rocket.style.opacity = '0';
                    }, 3000);

                }, index * 400);
            });
        }

        // Create confetti
        function createConfetti() {
            const colors = ['#FF6600', '#FFD700', '#3366CC', '#FFFFFF', '#00FF00'];
            const container = document.querySelector('.celebration-area');

            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[i % colors.length];
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.opacity = '0.8';

                container.appendChild(confetti);
                confettiPieces.push(confetti);

                animateConfetti(confetti, i);
            }
        }

        // Animate individual confetti piece
        function animateConfetti(confetti, index) {
            const startX = parseFloat(confetti.style.left);
            const startY = parseFloat(confetti.style.top);
            const amplitude = 30 + Math.random() * 70;
            const duration = 2000 + Math.random() * 2000;
            const startTime = Date.now();

            function fall() {
                const elapsed = Date.now() - startTime;
                const progress = elapsed / duration;

                if (progress < 1) {
                    const sway = Math.sin(elapsed * 0.005 + index) * amplitude;
                    const x = startX + sway * 0.1;
                    const y = startY + progress * 100;

                    confetti.style.left = `${x}%`;
                    confetti.style.top = `${y}%`;
                    confetti.style.opacity = 0.8 * (1 - progress);
                    confetti.style.transform = `rotate(${elapsed * 0.2}deg)`;

                    requestAnimationFrame(fall);
                } else {
                    confetti.remove();
                }
            }

            requestAnimationFrame(fall);
        }

        // COUNTING SYSTEM
        function startCounting() {
            rollSound.currentTime = 0;
            rollSound.volume = 0.3;
            rollSound.play();

            const startTime = Date.now();

            digitBoxes.forEach(box => box.classList.remove('active-digit'));
            digitBoxes[3].classList.add('active-digit');

            function animate() {
                if (!animationActive) return;

                const now = Date.now();
                const elapsed = now - startTime;
                const progress = Math.min(elapsed / config.duration, 1);

                const easeProgress = progress < 0.5
                    ? 2 * progress * progress
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;

                currentCount = Math.floor(easeProgress * config.targetCount);

                updateCounter(currentCount);
                updateActiveDigit(progress);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    finishCelebration();
                }
            }

            requestAnimationFrame(animate);
        }

        function updateCounter(num) {
            const str = num.toString().padStart(4, '0');
            
            str.split('').forEach((digit, index) => {
                const digitValue = parseInt(digit);
                const strip = strips[index];
                
                if (!strip) return;
                
                const position = -digitValue * 55;
                
                if (strip.currentPosition !== position) {
                    strip.style.transform = `translateY(${position}px)`;
                    strip.currentPosition = position;
                }
            });
        }

        function updateActiveDigit(progress) {
            let activeIndex = 3;

            if (progress > 0.7) activeIndex = 0;
            else if (progress > 0.4) activeIndex = 1;
            else if (progress > 0.1) activeIndex = 2;

            digitBoxes.forEach((box, index) => {
                if (index === activeIndex) {
                    box.classList.add('active-digit');
                } else {
                    box.classList.remove('active-digit');
                }
            });
        }

        // FINISH CELEBRATION
        function finishCelebration() {
            animationActive = false;

            rollSound.pause();

            winSound.currentTime = 0;
            winSound.volume = 0.5;
            winSound.play();

            setTimeout(() => launchRockets(), 500);
            setTimeout(() => createConfetti(), 1000);

            const images = document.querySelectorAll('.falling-img');
            images.forEach(img => {
                img.style.transition = 'opacity 2s ease';
                img.style.opacity = '0.4';
            });

            const counterOverlay = document.querySelector('.counter-overlay');
            counterOverlay.classList.add('glow');
            counterOverlay.style.borderColor = '#00FF00';
            counterOverlay.style.boxShadow = '0 0 20px #00FF00';

            setTimeout(() => {
                const finalMessage = document.getElementById('final-message');
                finalMessage.style.opacity = '1';
                // Add extra animation when appearing
                finalMessage.style.transform = 'translateX(-50%) scale(1.05)';
                setTimeout(() => {
                    finalMessage.style.transform = 'translateX(-50%) scale(1)';
                }, 300);
            }, 1500);

            const congratsText = document.querySelector('.congrats-text');
            congratsText.style.animation = 'textShine 3s infinite alternate';
        }

        // Initialize on load
        window.addEventListener('load', init);

        // Prevent context menu on long press
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            return false;
        });
    </script>
</body>

</html>
